# Sets the maximum allowed size of the client request body
client_max_body_size 20M;

# Increases the size of the types hash to optimize content type handling
types_hash_max_size 4096;

# Adjusts the bucket size to accommodate large hashes
types_hash_bucket_size 256;

# Optionally, you might want to tune the following:
# Sets the maximum size of temporary files for buffered client request bodies
client_body_temp_path /var/lib/nginx/tmp/client_body;

# Ensures enough workers are available to handle concurrent connections
worker_processes auto;

# Prevent timeout for long requests
proxy_read_timeout 300;
proxy_send_timeout 300;
client_body_timeout 300;
client_header_timeout 300;

# Log format and buffer settings for better performance and debugging
log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                '$status $body_bytes_sent "$http_referer" '
                '"$http_user_agent" "$http_x_forwarded_for"';
access_log /var/log/nginx/access.log main buffer=32k;

# Increase worker connections if necessary
worker_connections 1024;
